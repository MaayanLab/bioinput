!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e){"use strict";var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(t,e){function o(t,e){"function"!=typeof t[e]&&!function(){var n=t[e];t[e]=function(t){return t[n]}}()}function a(t,e){"function"!=typeof t[e]&&!function(){var n=t[e];t[e]=function(){return n}}()}function r(t){return t?p.text(t).html():""}function s(t){var e=0;if(document.selection){t.focus();var n=document.selection.createRange();n.moveStart("character",-t.value.length),e=n.text.length}else(t.selectionStart||"0"===t.selectionStart)&&(e=t.selectionStart);return e}function l(e,n){var i=!1;return t.each(n,function(t,n){if("number"==typeof n&&e.which===n)return i=!0,!1;if(e.which===n.which){var o=!n.hasOwnProperty("altKey")||e.altKey===n.altKey,a=!n.hasOwnProperty("shiftKey")||e.shiftKey===n.shiftKey,r=!n.hasOwnProperty("ctrlKey")||e.ctrlKey===n.ctrlKey;if(o&&a&&r)return i=!0,!1}}),i}function u(e,n){this.isInit=!0,this.entitiesArray=[],this.$element=t(e),this.$element.hide(),this.isSelect="SELECT"===e.tagName,this.multiple=this.isSelect&&e.hasAttribute("multiple"),this.objectItems=n&&n.itemValue,this.placeholderText=e.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=t('<div class="bioinput"></div>'),this.$tagList=t('<ul class="bioinput-tag-list"></ul>').appendTo(this.$container),this.$input=t('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.before(this.$container),this.build(n),this.isInit=!1}if(void 0===t)throw new Error("BioInput requires jQuery and it is currently undefined.");if(void 0===e)throw new Error("BioInput requires Bloodhound and it is currently undefined. This is included with the latest version of typeahead.js");var p=t("<div />"),c={tagClass:function(){return"bioinput-label bioinput-label-info"},focusClass:"focus",itemValue:function(t){return t?t.toString():t},itemText:function(t){return this.itemValue(t)},itemTitle:function(){return null},freeInput:!0,addOnBlur:!0,maxTags:void 0,maxChars:void 0,confirmKeys:[13,44],delimiter:",",delimiterRegex:null,cancelConfirmKeysOnEmpty:!1,onTagExists:function(t,e){e.hide().fadeIn()},trimValue:!1,allowDuplicates:!1};u.prototype={constructor:u,add:function(e,n,o){var a=e,s=this;if(!(s.options.maxTags&&s.entitiesArray.length>=s.options.maxTags)&&(a===!1||a)){if("string"==typeof a&&s.options.trimValue&&(a=t.trim(a)),"object"===("undefined"==typeof a?"undefined":i(a))&&!s.objectItems)throw new Error("Can't add objects when itemValue option is not set");if(!a.toString().match(/^\s*$/)){if(s.isSelect&&!s.multiple&&s.entitiesArray.length>0&&s.remove(s.entitiesArray[0]),"string"==typeof a&&"INPUT"===this.$element[0].tagName){var l=s.options.delimiterRegex?s.options.delimiterRegex:s.options.delimiter,u=a.split(l);if(u.length>1){for(var p=0;p<u.length;p++)this.add(u[p],!0);return void(n||s.pushVal())}}var c=s.options.itemValue(a),m=s.options.itemText(a),d=s.options.tagClass(a),h=s.options.itemTitle(a),f=t.grep(s.entitiesArray,function(t){return s.options.itemValue(t)===c})[0];if(!f||s.options.allowDuplicates){if(!(s.entities().toString().length+a.length+1>s.options.maxInputLength)){var v=new t.Event("beforeItemAdd",{item:a,cancel:!1,options:o});if(s.$element.trigger(v),!v.cancel){s.entitiesArray.push(a);var y=t('<li class="tag '+r(d)+(null!==h?'" title="'+h:"")+'">'+r(m)+'<span data-role="remove"></span></li>');y.data("item",a),s.$tagList.append(y),y.after(" ");var g=t('option[value="'+encodeURIComponent(c)+'"]',s.$element).length||t('option[value="'+r(c)+'"]',s.$element).length;if(s.isSelect&&!g){var $=t("<option selected>"+r(m)+"</option>");$.data("item",a),$.attr("value",c),s.$element.append($)}n||s.pushVal(),(s.options.maxTags===s.entitiesArray.length||s.entities().toString().length===s.options.maxInputLength)&&s.$container.addClass("bioinput-max"),t(".typeahead, .twitter-typeahead",s.$container).length&&s.$input.typeahead("val",""),this.isInit?s.$element.trigger(new t.Event("itemAddedOnInit",{item:a,options:o})):s.$element.trigger(new t.Event("itemAdded",{item:a,options:o}))}}}else if(s.options.onTagExists){var b=t(".tag",s.$container).filter(function(){return t(this).data("item")===f});s.options.onTagExists(a,b)}}}},remove:function(e,n,o){var a=e,r=this;if(r.objectItems&&(a="object"===("undefined"==typeof a?"undefined":i(a))?t.grep(r.entitiesArray,function(t){return r.options.itemValue(t)===r.options.itemValue(a)}):t.grep(r.entitiesArray,function(t){return r.options.itemValue(t)===a}),a=a[a.length-1]),a){var s=new t.Event("beforeItemRemove",{item:a,cancel:!1,options:o});if(r.$element.trigger(s),s.cancel)return;t(".tag",r.$container).filter(function(){return t(this).data("item")===a}).remove(),t("option",r.$element).filter(function(){return t(this).data("item")===a}).remove(),-1!==t.inArray(a,r.entitiesArray)&&r.entitiesArray.splice(t.inArray(a,r.entitiesArray),1)}n||r.pushVal(),r.options.maxTags>r.entitiesArray.length&&r.$container.removeClass("bioinput-max"),r.$element.trigger(new t.Event("itemRemoved",{item:a,options:o}))},removeAll:function(){var e=this;for(t(".tag",e.$container).remove(),t("option",e.$element).remove();e.entitiesArray.length>0;)e.entitiesArray.pop();e.pushVal()},refresh:function(){var e=this;t(".tag",e.$container).each(function(){var n=t(this),i=n.data("item"),o=e.options.itemValue(i),a=e.options.itemText(i),s=e.options.tagClass(i);if(n.attr("class",null),n.addClass("tag "+r(s)),n.contents().filter(function(){return 3===this.nodeType})[0].nodeValue=r(a),e.isSelect){var l=t("option",e.$element).filter(function(){return t(this).data("item")===i});l.attr("value",o)}})},entities:function(){return this.entitiesArray},pushVal:function(){var e=this,n=t.map(e.entities(),function(t){return e.options.itemValue(t).toString()});e.$element.val(n,!0).trigger("change")},build:function(e){var n=this;n.options=t.extend({},c,e),n.objectItems&&(n.options.freeInput=!1),o(n.options,"itemValue"),o(n.options,"itemText"),a(n.options,"tagClass"),n.options.autocomplete&&!function(){var e=null,i={},o=n.options.autocomplete;t.isArray(o)?(e=o[0],i=o[1]):i=o,n.$input.typeahead(e,i).on("typeahead:selected",t.proxy(function(t,e){i.valueKey?n.add(e[i.valueKey]):n.add(e),n.$input.typeahead("val","")},n))}(),n.$container.on("click",t.proxy(function(){n.$element.attr("disabled")||n.$input.removeAttr("disabled"),n.$input.focus()},n)),n.options.addOnBlur&&n.options.freeInput&&n.$input.on("focusout",t.proxy(function(){0===t(".typeahead, .twitter-typeahead",n.$container).length&&(n.add(n.$input.val()),n.$input.val(""))},n)),n.$container.on({focusin:function(){n.$container.addClass(n.options.focusClass)},focusout:function(){n.$container.removeClass(n.options.focusClass)}});var i=0;n.$container.on("keydown","input",t.proxy(function(e){var o=t(e.target),a=t(".bioinput-label");if(n.$element.attr("disabled"))return void n.$input.attr("disabled","disabled");if(8===e.which&&0===s(o[0])){var r=a.last();r.length&&8===i?(n.remove(r.data("item")),i=0):r.length&&(r.addClass("tag-to-remove"),i=8)}else i=0,t(".tag").each(function(){t(this).removeClass("tag-to-remove")});o.attr("size",Math.max(this.inputSize,o.val().length+1))},n)),n.$container.on("keypress","input",t.proxy(function(e){var i=t(e.target);if(n.$element.attr("disabled"))return void n.$input.attr("disabled","disabled");var o=i.val(),a=n.options.maxChars&&o.length>=n.options.maxChars;n.options.freeInput&&(l(e,n.options.confirmKeys)||a)&&(0!==o.length&&(n.add(a?o.substr(0,n.options.maxChars):o),i.val("")),n.options.cancelConfirmKeysOnEmpty===!1&&e.preventDefault()),i.attr("size",Math.max(this.inputSize,i.val().length+1))},n)),n.$container.on("click","[data-role=remove]",t.proxy(function(e){n.$element.attr("disabled")||n.remove(t(e.target).closest(".tag").data("item"))},n)),n.options.itemValue===c.itemValue&&("INPUT"===n.$element[0].tagName?n.add(n.$element.val()):t("option",n.$element).each(function(){n.add(t(this).attr("value"),!0)}))},destroy:function(){var t=this;t.$container.off("keypress","input"),t.$container.off("click","[role=remove]"),t.$container.remove(),t.$element.removeData("bioinput"),t.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var e=this.$input[0],n=this.$container[0];e&&e.parentNode!==n;)e=e.parentNode;return t(e)}},t.fn.bioinput=function(e,n,i){var o=[];return this.each(function(){var a=t(this).data("bioinput");if(a)if(e||n){if(void 0!==a[e]){var r=void 0;r=3===a[e].length&&void 0!==i?a[e](n,null,i):a[e](n),void 0!==r&&o.push(r)}}else o.push(a);else a=new u(this,e),t(this).data("bioinput",a),o.push(a),"SELECT"===this.tagName&&t("option",t(this)).attr("selected","selected"),t(this).val(t(this).val())}),"string"==typeof e?o.length>1?o:o[0]:o},t.fn.bioinput.Constructor=u;var m={queryTokenizer:e.tokenizers.whitespace,datumTokenizer:e.tokenizers.whitespace,remote:{url:"",wildcard:"%QUERY",transform:function(e){return t.map(e,function(t){return t.name})}}},d=new e(n({},m,{remote:n({},m.remote,{url:"http://amp.pharm.mssm.edu/LDR/api/autocomplete/assays?q=%QUERY"})})),h=new e(n({},m,{remote:n({},m.remote,{url:"http://amp.pharm.mssm.edu/LDR/api/autocomplete/cellLines?q=%QUERY"})}));t(function(){t("input[data-role=bioinput][data-entity-type=assay]").bioinput({autocomplete:{source:d}}),t("input[data-role=bioinput][data-entity-type=cell]").bioinput({autocomplete:{source:h}})})}(window.jQuery,window.Bloodhound)}]);